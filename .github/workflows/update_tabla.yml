name: Actualizar Tabla ARUSA

on:
  schedule:
    - cron: '0 */2 * * *' # Cada 2 horas
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
  - name: Checkout repo
    uses: actions/checkout@v4

  - name: Setup Python
    uses: actions/setup-python@v4
    with:
      python-version: '3.10'

  - name: Mostrar 치rbol de trabajo (diagn칩stico)
    run: |
      pwd
      echo "Contenido de la carpeta actual:"
      ls -la
      echo "Buscando scraper_tabla_arusa.py:"
      find . -maxdepth 5 -type f -name "scraper_tabla_arusa.py" -print || true

  - name: Ejecutar scraper
    run: python ./scraper_tabla_arusa.py
      - name: Commit y push si hay cambios
        run: |
          git config --global user.name 'github-actions'
          git config --global user.email 'github-actions@github.com'
          git add tabla_arusa.json
          git diff --quiet && git diff --staged --quiet || git commit -m "Actualizaci칩n autom치tica de tabla"
          git push
